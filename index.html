<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>RepRally Sales Tool</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=DM+Mono:wght@400;500;600&display=swap" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; background: #F2F3F5; }
    body { font-family: 'DM Sans', 'Helvetica Neue', sans-serif; }
    ::-webkit-scrollbar { display: none; }
    #root { min-height: 100vh; }
    button { font-family: 'DM Sans', sans-serif; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useMemo } = React;

    const BRANDS = [
      { id:"smackin", name:"Smackin'", type:"Snack", desc:"Flavoured Sunflower Seeds", deal:"15% Intro Discount", hasDeal:true, margin:55, retail:"$3.49‚Äì$4.99", wholesale:"$1.50‚Äì$2.20", sellThrough:80, reorder:58, hook:"Viral sunflower seeds ‚Äî the founder pitched MLB players on camera", tags:["TikTok viral","Younger crowd","MLB fan base"], why:"The founder went to MLB games and asked players to try them on social media. Blew up instantly. Younger customers buy it on sight.", opener:"Are you seeing a lot of younger customers in here? Like 16‚Äì30s?", value:"Smackin' went viral when the founder walked into MLB stadiums and got players to try them on camera. Now it's everywhere on social media. Younger customers come in specifically looking for it.", differentiator:"15% intro discount right now. Your competitors probably don't have it yet ‚Äî you can be the store in the area that does.", pitchLine:"This brand went viral on social media and is super popular amongst younger people. They have a 15% off deal going on right now", shelfGap:["thin_snacks","no_viral_snacks"] },
      { id:"gngr", name:"GNGR Ginger Shot", type:"Drink: Health & Wellness", desc:"Natural Wellness Shot", deal:"Buy 4, Get 1 Free", hasDeal:true, margin:57, retail:"$3.99‚Äì$5.99", wholesale:"$1.70‚Äì$2.60", sellThrough:73, reorder:50, hook:"Organic immunity shot ‚Äî sales up 25% last year, no fridge needed", tags:["Buy 4 Get 1 Free","+25% sales growth","Shelf stable"], why:"People who take vitamins or Emergen-C trade up to this because it feels like real food, not a powder. Sales grew 25% last year.", opener:"Do you have customers into health and wellness ‚Äî people buying vitamins or supplements?", value:"GNGR is a 2oz organic ginger immunity shot ‚Äî shelf stable, no refrigeration. Sales grew 25% last year. Buy 4 get 1 free right now.", differentiator:"No cold chain. No spoilage risk. Buy 4 Get 1 Free makes it an easy yes at $4.99 retail.", pitchLine:"Health & Wellness brand with natural ingredients, great sales increasing 25% last year. When you buy 4, get 1 free.", shelfGap:["no_wellness","no_shots"] },
      { id:"exotic_rb", name:"Exotic Red Bulls", type:"Drink: Exotic", desc:"Exotic / Import Flavor Energy Drinks", deal:null, hasDeal:false, margin:68, retail:"$4.99‚Äì$6.99", wholesale:"$1.60‚Äì$2.20", sellThrough:85, reorder:62, hook:"Red Bull exotic flavors ‚Äî 68% margin, huge social media demand", tags:["68% margin","Social media demand","Growing in your area"], why:"People who drink Red Bull see exotic flavors online and go store-to-store hunting for them. You become the destination.", opener:"How's your energy drink section ‚Äî is it mostly standard Red Bull and Monster?", value:"These are exotic Red Bull flavors your customers see on social media and actively hunt for. 68% margin ‚Äî almost double standard Red Bull.", differentiator:"68% gross margin on energy drinks. That's almost double what you make on standard Red Bull.", pitchLine:"Growing demand in your area, popular on social media for unique flavours, offers high margin markup up to 68%", shelfGap:["standard_energy","no_exotic_drinks"] },
      { id:"oasis_dubai", name:"OasisDubai Chocolate", type:"Snack: Chocolate", desc:"Oasis Treasures Dubai Chocolate 2.6oz", deal:null, hasDeal:false, margin:58, retail:"$6.99‚Äì$12.99", wholesale:"$3.00‚Äì$5.50", sellThrough:87, reorder:54, hook:"The viral Dubai chocolate ‚Äî 87% reorder rate, sells itself", tags:["87% reorder rate","TikTok 50M+ views","Stands out on shelf"], why:"Customers have seen it on TikTok 50+ times and come in specifically looking for it. 87% reorder ‚Äî once someone buys it, they come back.", opener:"Have customers been asking for Dubai chocolate? Because the TikTok demand is real right now.", value:"OasisDubai is the viral Dubai chocolate ‚Äî pistachio-kataifi-cream filling. 87% reorder rate means it basically sells itself.", differentiator:"87% reorder rate is the highest in our snack catalog. Pre-sold customer demand before they walk in.", pitchLine:"Currently trending everywhere. Will set your store apart. Reorder rate of 87% ‚Äî it sells by itself.", shelfGap:["standard_chocolate","no_viral_snacks","thin_snacks"] },
      { id:"neurogum", name:"NeuroGum", type:"Gum", desc:"Energy & Focus Gum 6ct/pk", deal:"25% Intro Discount", hasDeal:true, margin:48, retail:"$4.99‚Äì$6.99", wholesale:"$2.20‚Äì$3.10", sellThrough:78, reorder:65, hook:"Clinically-tested focus gum ‚Äî energy drink alternative, no crash", tags:["25% intro discount","No crash","Clinical studies"], why:"Energy drink buyers who hate the crash switch to NeuroGum and never go back. Absorbed through the mouth ‚Äî hits faster than coffee.", opener:"Do you sell a lot of energy drinks? What do those customers tend to look like?", value:"NeuroGum has caffeine and L-theanine absorbed through your mouth ‚Äî hits faster than coffee, zero crash. Clinical studies back it up. 25% intro discount now.", differentiator:"25% intro discount + high reorder ‚Äî energy drink buyers become loyal repeat customers.", pitchLine:"Popular alternative to energy drinks. Clinical studies provide mental energy, focus & cognitive support. Take advantage of 25% brand promo.", shelfGap:["standard_energy","no_functional"] },
      { id:"little_rick", name:"Little Rick", type:"Drink: THC+CBD+Hemp", desc:"5mg THC + 10mg CBD Hemp Drink, 12oz", deal:null, hasDeal:false, margin:54, retail:"$4.99‚Äì$6.99", wholesale:"$2.10‚Äì$3.00", sellThrough:70, reorder:54, hook:"Hemp relaxation drink ‚Äî sober-curious alternative, no hangover", tags:["No hangover","Sober-curious trend","5mg THC + 10mg CBD"], why:"People who want to decompress without alcohol. Growing sober-curious market ‚Äî they want something social without getting drunk.", opener:"Are customers asking about hemp drinks or CBD beverages? The sober-curious trend is driving demand.", value:"Little Rick is a hemp drink with 5mg THC and 10mg CBD ‚Äî the person who wants to relax without alcohol. Health-conscious, no hangover.", differentiator:"Sober-curious is one of the fastest growing consumer trends. First to carry it captures that audience.", pitchLine:"Growing demand, attracting health-conscious consumers seeking alternative relaxation options without a hangover.", shelfGap:["no_alt_wellness","no_thc_drinks"] },
      { id:"choice_ercigs", name:"CHOICE Ercigs", type:"Smoke", desc:"Classic Red & Menthol, 5 carton, 10 packs", deal:null, hasDeal:false, margin:52, retail:"$12.99‚Äì$19.99", wholesale:"$6.00‚Äì$9.50", sellThrough:74, reorder:51, hook:"No-tobacco e-cig ‚Äî no tobacco taxes or regulations", tags:["No tobacco tax","No regulation hassle","Nicotine alternative"], why:"Smokers who want to quit tobacco but still want nicotine ‚Äî and store owners who want to avoid tobacco tax complexity.", opener:"How's your tobacco section performing? Any issues with tax compliance?", value:"CHOICE Ercigs ‚Äî no tobacco, no nicotine, no tobacco taxes or regulations. Trending alternative for smokers who want the experience without the guilt.", differentiator:"Zero tobacco tax complexity. Higher margin than traditional cigarettes.", pitchLine:"Most trending alternative to smoking. No tobacco, no nicotine, no guilt. No tobacco taxes or regulations.", shelfGap:["has_smoke_section","thin_smoke"] },
      { id:"willie_thca", name:"Willie's Remedy THCA", type:"Smoke: THCA", desc:"Willie's Remedy THCA Smokes 10ct", deal:null, hasDeal:false, margin:46, retail:"$14.99‚Äì$24.99", wholesale:"$8.00‚Äì$13.50", sellThrough:71, reorder:50, hook:"Premium hemp THCA smokes ‚Äî 46% margin, eco-conscious positioning", tags:["46% margin","Hemp-based","Health-conscious smokers"], why:"Smokers who are health-conscious and want to feel better about what they're smoking. Premium positioning drives premium price.", opener:"Are customers asking for hemp-based or THCA alternatives in your smoke section?", value:"Willie's Remedy THCA Smokes ‚Äî premium hemp-based, eco-friendly. Health-conscious smokers pay more for this. 46% gross margin.", differentiator:"46% margin on a smoke product is exceptional. Premium positioning means customers don't haggle on price.", pitchLine:"Premium Hemp-based products. Eco-Friendly and health-conscious smoke alternative. High-margin product of 46%, great markup.", shelfGap:["has_smoke_section","no_hemp_smoke"] },
      { id:"smoking_dog", name:"Smoking Dog", type:"Drink: THC", desc:"25mg THC Seltzer, 12oz", deal:"Buy $300, Save $30", hasDeal:true, margin:55, retail:"$5.99‚Äì$8.99", wholesale:"$2.60‚Äì$3.90", sellThrough:67, reorder:52, hook:"25mg THC seltzer ‚Äî alcohol alternative with a promo deal now", tags:["25mg THC","Buy $300 Save $30","Alcohol alternative"], why:"Social drinkers who want a buzz at a party without the calories and hangover of alcohol.", opener:"Are customers asking about THC beverages? One of the fastest growing categories where it's legal.", value:"Smoking Dog is a 25mg THC seltzer ‚Äî flavorful way to enjoy THC without alcohol. Buy $300, save $30 right now.", differentiator:"Buy $300 Save $30 makes stocking cost-effective. 25mg is a strong dose that drives repeat purchase.", pitchLine:"Flavorful and convenient way to enjoy THC without alcohol. Save $30 with purchases over $300.", shelfGap:["no_thc_drinks","no_alt_wellness"] },
      { id:"tbd_lemonade", name:"TBD Green Tea Lemonade", type:"Drink: CBD", desc:"20mg CBD Green Tea Lemonade, 12oz", deal:"20% Intro Discount", hasDeal:true, margin:55, retail:"$4.99‚Äì$6.99", wholesale:"$2.10‚Äì$3.00", sellThrough:69, reorder:51, hook:"Organic CBD lemonade ‚Äî refreshing, low sugar, 20% intro promo", tags:["20% intro discount","Low sugar","Organic & CBD"], why:"Health-conscious customers who want a refreshing drink that also does something ‚Äî CBD for balance and calm.", opener:"Do you carry any CBD drinks right now? The wellness drink market is really moving.", value:"TBD is organic CBD green tea lemonade ‚Äî refreshing, low sugar, low calorie. 20% intro discount right now.", differentiator:"20% intro promo + great repeat purchase because CBD creates a habit-forming wellness routine.", pitchLine:"Refreshing and organic, low sugar and low calorie, CBD for balance & mind. 20% brand promo for great earning margin.", shelfGap:["no_cbd_drinks","no_alt_wellness"] },
      { id:"brez", name:"Brez", type:"Drink: THC+CBD+Lion's Mane", desc:"Cannabis and Mushroom Tonic, 7.5mg", deal:null, hasDeal:false, margin:56, retail:"$5.99‚Äì$8.99", wholesale:"$2.60‚Äì$3.90", sellThrough:72, reorder:54, hook:"Microdosing cannabis + lion's mane ‚Äî biggest functional drink trend", tags:["Microdosing trend","Lion's Mane boost","Social use case"], why:"People who want social cannabis experience but hate feeling too high. Microdosing is the fastest growing wellness trend.", opener:"Are your customers into the microdosing or functional mushroom trend? It's blowing up.", value:"Brez is cannabis plus lion's mane in a canned drink ‚Äî microdosing trend meets functional mushrooms. Unique, healthier choice for socializing.", differentiator:"Only product combining THC microdose + lion's mane cognitive boost in a drink. Zero direct competition.", pitchLine:"High social trend product. Microdosing of cannabis and lion's mane attracts consumers for a unique, healthier choice for socializing.", shelfGap:["no_thc_drinks","no_alt_wellness","no_functional"] },
      { id:"kanva", name:"Kanva Focus & Flow", type:"Drink: Kava+Kratom", desc:"Kava + Kratom 2oz Shot, 75‚Äì80 Mit", deal:null, hasDeal:false, margin:55, retail:"$6.99‚Äì$9.99", wholesale:"$3.00‚Äì$4.40", sellThrough:71, reorder:62, hook:"#1 kava+kratom shot ‚Äî 2x stronger than competitors, moves twice as fast", tags:["#1 seller in category","2x stronger formula","Smoke shop staple"], why:"Kratom users who've tried other shots know Kanva is stronger. Customers ask for it by name once they find it.", opener:"Are your customers asking for kava or kratom products? That category has been moving really fast.", value:"Kanva Focus & Flow is the #1 selling kava+kratom shot ‚Äî twice as strong as competitors, moves twice as fast off the shelf.", differentiator:"#1 in category. 2x the potency means 2x the repeat purchases. Smoke shop customers already looking for it.", pitchLine:"#1 selling, twice as strong as their biggest competitors, moves twice as fast.", shelfGap:["has_smoke_section","no_alt_wellness","no_kratom"] },
      { id:"david", name:"David Protein", type:"Snack: Protein Bar", desc:"28g Protein Bar, 150 Cal", deal:"B5G1 Deal", hasDeal:true, margin:53, retail:"$3.49‚Äì$4.99", wholesale:"$1.60‚Äì$2.30", sellThrough:86, reorder:63, hook:"#1 protein bar in the US right now ‚Äî 28g protein, tastes like candy", tags:["#1 in US","B5G1 deal","28g protein / 150 cal"], why:"Fitness shoppers who are skeptical pick it up to read the label and end up buying 3. Best macros in the category.", opener:"What does your protein bar section look like ‚Äî is it all Quest and RX Bar?", value:"David Protein is the #1 best-selling protein bar in the country right now. 28g protein, 150 calories. Stores that bought last week are already reordering. B5G1 deal now.", differentiator:"#1 in US + B5G1 means stores get in at low risk. 86% sell-through ‚Äî they always move.", pitchLine:"The #1 best selling protein bar in the country right now. They will fly off your shelf. B5G1 deal right now.", shelfGap:["thin_protein","no_functional","thin_snacks"] },
    ];

    const OBSERVATIONS = [
      { id:"standard_energy",   icon:"‚ö°", label:"Standard energy drinks only",     hint:"Red Bull + Monster, nothing exotic",       brands:["exotic_rb","neurogum"] },
      { id:"no_exotic_drinks",  icon:"üîç", label:"No exotic / import drinks",        hint:"Just domestic brands on drink shelf",     brands:["exotic_rb","brez","smoking_dog"] },
      { id:"thin_snacks",       icon:"üì¶", label:"Snack shelf looks thin / basic",   hint:"Low variety, mostly chips and candy",     brands:["smackin","oasis_dubai","david"] },
      { id:"no_viral_snacks",   icon:"üì±", label:"No trending / viral snacks",       hint:"Nothing you'd see on TikTok",             brands:["smackin","oasis_dubai"] },
      { id:"standard_chocolate",icon:"üç´", label:"Standard chocolate only",          hint:"Kit Kat, Snickers, nothing premium",      brands:["oasis_dubai"] },
      { id:"no_wellness",       icon:"üíä", label:"No wellness shots or supplements", hint:"No immunity shots, collagen, etc.",       brands:["gngr","neurogum"] },
      { id:"no_alt_wellness",   icon:"üåø", label:"No alt-wellness / CBD / hemp",     hint:"No kratom, kava, CBD drinks",             brands:["kanva","brez","little_rick","tbd_lemonade"] },
      { id:"has_smoke_section", icon:"üö¨", label:"Has a smoke / vape section",       hint:"Cigarettes, vapes, or tobacco products", brands:["choice_ercigs","willie_thca","kanva","smoking_dog"] },
      { id:"no_thc_drinks",     icon:"üßÉ", label:"No THC / cannabis beverages",      hint:"Missing this fast-growing category",     brands:["smoking_dog","brez","little_rick","tbd_lemonade"] },
      { id:"thin_protein",      icon:"üí™", label:"Protein bar section is weak",      hint:"Only 1-2 brands, low variety",           brands:["david","neurogum"] },
      { id:"counter_space",     icon:"üõí", label:"Open counter / register space",    hint:"Unused area near checkout",              brands:["smackin","gngr","neurogum","oasis_dubai"] },
      { id:"no_kratom",         icon:"üå±", label:"No kratom / kava products",        hint:"Missing this growing category entirely", brands:["kanva","willie_thca"] },
    ];

    const STORE_TYPES = [
      { id:"convenience", icon:"üè™", label:"Convenience Store", color:"#F7931E", bg:"#FFF7ED", brands:["smackin","gngr","exotic_rb","oasis_dubai","neurogum","little_rick","tbd_lemonade","brez","david","smoking_dog"] },
      { id:"gas",         icon:"‚õΩ", label:"Gas Station",        color:"#EF476F", bg:"#FFF0F3", brands:["smackin","exotic_rb","oasis_dubai","neurogum","david","kanva","choice_ercigs","willie_thca","gngr"] },
      { id:"grocery",     icon:"üõí", label:"Grocery",            color:"#06D6A0", bg:"#F0FDFB", brands:["smackin","gngr","exotic_rb","oasis_dubai","neurogum","tbd_lemonade","brez","david"] },
      { id:"liquor",      icon:"üçæ", label:"Liquor Store",       color:"#8338EC", bg:"#FAF5FF", brands:["exotic_rb","oasis_dubai","little_rick","smoking_dog","brez","kanva","gngr","smackin"] },
      { id:"foodservice", icon:"üçΩÔ∏è", label:"Food Service",       color:"#0284C7", bg:"#F0F9FF", brands:["gngr","tbd_lemonade","david","oasis_dubai","smackin"] },
      { id:"tobacco",     icon:"üö¨", label:"Tobacco / Smoke",    color:"#555",    bg:"#F8F8F8", brands:["choice_ercigs","willie_thca","kanva","smoking_dog","brez","little_rick","tbd_lemonade"] },
      { id:"gym",         icon:"üí™", label:"Gym",                color:"#059669", bg:"#F0FDF4", brands:["neurogum","gngr","tbd_lemonade","david"] },
      { id:"other",       icon:"üì¶", label:"Other Retail",       color:"#D97706", bg:"#FFFBEB", brands:["smackin","gngr","exotic_rb","oasis_dubai","neurogum","little_rick","tbd_lemonade","brez","david","smoking_dog","kanva"] },
    ];

    const STATUS_SCRIPTS = {
      active:  { label:"Active",    color:"#059669", bg:"#F0FDF4", border:"#BBF7D0", days:"1‚Äì30 days",     icon:"üü¢", opener:"How was your recent order? Do you run low on anything?", script:`"How are you doing? How was your recent order? Do you run low on anything? I see that you ordered [product] ‚Äî do you need to restock? Right now, we have this deal going on... By the way, we have a huge promo going on for [product]..."`, tip:"Lead with service, then deals. They're happy ‚Äî build on that goodwill." },
      cooled:  { label:"Cooled",    color:"#D97706", bg:"#FFFBEB", border:"#FDE68A", days:"30‚Äì45 days",    icon:"üü°", opener:"Check in on order, then pitch 2 new deals with urgency", script:`"How are you doing? How was your recent order? Do you run low on anything? I see you ordered [product] ‚Äî do you need to restock? Right now we have this deal going on... By the way, we have a huge promo on [product]. You've got to take advantage of this."`, tip:"They've slowed down ‚Äî re-engage with a time-sensitive deal. Create urgency." },
      churned: { label:"Churned",   color:"#DC2626", bg:"#FEF2F2", border:"#FECACA", days:"45+ days",      icon:"üî¥", opener:"Re-introduce RepRally ‚Äî remind them what they bought", script:`"Hi, is this [owner name] from [store name]? This is [your name] from RepRally. We're a distribution company. You bought [product 1], [product 2] from us with a rep called [last rep name]. Does that ring a bell? I work on the inside sales team at RepRally and I have some personalized deals just for you. These products will sell really well in your store and a lot of them have discounts. Do you have 5 minutes ‚Äî let me tell you about them."`, tip:"Don't assume they remember you. Re-establish who RepRally is, then go straight to personalized deals." },
      new:     { label:"New Store", color:"#7C3AED", bg:"#FAF5FF", border:"#E9D5FF", days:"Never ordered", icon:"üÜï", opener:"Introduce RepRally + 2-3 anchor products with deals", script:`"Hey, my name is [your name]. We are RepRally, a distribution company in your area. We carry consumer package goods ‚Äî like Coke and Red Bull, but also Jack Links, David Protein Bar, M&Ms, etc. We also carry smoke products and THC products for smoke stores. I have some products that will sell really well in your store and a lot of them have discounts. Do you have 5 minutes? I'm happy to place an order over the phone or route a rep in to service you."`, tip:"Name-drop brands they already know (Coke, Red Bull, David) to establish credibility first." },
    };

    const OBJECTIONS = [
      { id:"slow",        trigger:"Business is slow / I don't need anything",          response:`"Hey, I totally understand. I'm actually working with a lot of stores like yours in your area to help them with this exact problem. I know it's slow season now, but we have products that will sell regardless of the season. Like [product] ‚Äî it's been flying off shelves even in slower stores. Do you have 2 minutes?"`, tip:"Position yourself as the solution to their slow sales, not another vendor." },
      { id:"bad_rep",     trigger:"My last rep was bad",                               response:`"Wow, so sorry to hear that. What happened? [Listen.] This is not the type of experience we want to provide. I'm here to make it up for you. I can send a new rep into your store, or sign you up for our store portal where you can order directly. There's a buy $300, get $50 off deal right now. When are you usually in the store?"`, tip:"Listen first, then solve. Don't jump to the deal until you've acknowledged the problem." },
      { id:"good",        trigger:"I'm good on everything",                            response:`"What are you interested in? I'm working with a lot of stores like yours in your area. These products ‚Äî [product 1] and [product 2] ‚Äî will sell really well in your store. I can also send you a link to our store portal where you can order items directly whenever it's convenient for you."`, tip:"Never just say OK and hang up. Pivot to specific products immediately." },
      { id:"pricing",     trigger:"Your pricing is bad",                               response:`"I see, which products specifically? How much are you getting it for? [Listen.] If you can get them cheaper somewhere else ‚Äî you should! But we have over 350 brands in our catalog. The pricing for our top products is very good, and your other distributors probably don't have them. Just take a look."`, tip:"Don't get defensive. Acknowledge, then redirect to unique brands they can't get elsewhere." },
      { id:"not_sold",    trigger:"Products from last time still haven't sold",        response:`"How many days has it been since they arrived? [Under 60 days:] Just give it a couple more weeks. [Over 60 days:] I'll send a rep to collect them and give you credits. Your credits expire after 30 days ‚Äî we have great products on sale right now, want to place a small test order with the credits?"`, tip:"Under 60 days = patience. Over 60 days = credit solution + new order opportunity." },
      { id:"slow2",       trigger:"It's slow right now",                               response:`"OK, I hear you. No worries. Just so you know, our catalog only shows products legal in your area ‚Äî so you won't get a ticket. Also I can send you the link to our store portal so you can check products on your own. We don't have order minimums ‚Äî you can start with just a few units."`, tip:"Remove friction: no minimums, legal only, browse on their own time. Make the yes easy." },
      { id:"fulfillment", trigger:"It took too long / fulfillment was bad",            response:`"That's weird ‚Äî it usually doesn't take that long. Which brand was it? I'll communicate with them to make sure this doesn't happen again. Let's try some other brands. Let me tell you about [X], [Y], [Z]."`, tip:"Acknowledge, take action, immediately pivot. Don't dwell ‚Äî move to new products." },
      { id:"damaged",     trigger:"The products came in damaged",                      response:`"What products broke? I'm so sorry. Were you able to get them reshipped or refunded? [Yes:] I'm glad we took care of that. Do you want to use the credits for some top-selling products? [No:] Send me the photos ‚Äî I'll report them to operations right now."`, tip:"Resolve credits FIRST. Never pitch a new deal before solving the existing problem." },
      { id:"thc_state",   trigger:"Can't order THC products ‚Äî state regulations",      response:`"Totally understand ‚Äî no worries at all. The good news is we have a lot of non-THC products selling really well right now. [Pivot to GNGR, Smackin', OasisDubai, David Protein, NeuroGum.] Let me tell you about a couple that are flying in stores like yours."`, tip:"Never push compliance-sensitive products. Immediately pivot to your strongest non-THC options." },
    ];

    function brandColor(id) {
      const map = { smackin:"#F7931E", gngr:"#06D6A0", exotic_rb:"#EF476F", oasis_dubai:"#8338EC", neurogum:"#3A86FF", little_rick:"#118AB2", choice_ercigs:"#555", willie_thca:"#43AA8B", smoking_dog:"#FF6B35", tbd_lemonade:"#0EA5E9", brez:"#7C3AED", kanva:"#D97706", david:"#EF476F" };
      return map[id] || "#333";
    }
    function getInitials(n) { return n.split(" ").slice(0,2).map(w=>w[0]).join("").toUpperCase(); }
    function mc(m) { return m >= 55 ? "#059669" : m >= 48 ? "#0284C7" : "#D97706"; }

    function DealBadge({ deal }) {
      if (!deal) return null;
      return <div style={{ display:"inline-flex", alignItems:"center", gap:4, padding:"3px 9px", borderRadius:20, background:"linear-gradient(135deg,#FF6B35,#F7931E)", color:"white", fontSize:10, fontWeight:700, fontFamily:"DM Mono" }}>üî• {deal}</div>;
    }

    function BrandCard({ brand }) {
      const [tab, setTab] = useState("closed");
      const [scriptStep, setScriptStep] = useState(0);
      const [closerSel, setCloserSel] = useState(null);
      const [closerDone, setCloserDone] = useState(false);
      const color = brandColor(brand.id);
      const CLOSERS = [
        { label:"Free Sample", icon:"üéÅ", script:`"No problem. Let me send you 2‚Äì3 units to try with your customers ‚Äî zero cost, zero commitment. If it sells, you'll know right away."` },
        { label:"Trial Case + Swap", icon:"üì¶", script:`"One case at intro pricing ‚Äî if it doesn't move in 30 days, I'll swap it for something that does. Zero risk."` },
        { label:"Check Promo", icon:"üè∑Ô∏è", script:`"Actually, let me check ‚Äî we might have a promo running on this brand right now. Could be BOGO or 15% off first order."` },
        { label:"Free Display", icon:"üñºÔ∏è", script:`"We can put a free branded counter display right here ‚Äî no shelf space needed. The display drives the impulse buy."` },
        { label:"Follow-Up", icon:"üìÖ", script:`"When's a better time? I'd rather come back when you can look at inventory properly. What day next week works?"` },
      ];
      const scriptSteps = [
        { label:"OPENER", icon:"üëã", text:brand.opener, tip:"Ask, don't tell. Their answer tells you which angle to use." },
        { label:"VALUE",  icon:"‚ú¶",  text:brand.value,  tip:"Lead with the customer benefit, not the product features." },
        { label:"PROOF",  icon:"üìä", text:brand.differentiator, tip:"One sharp fact. Don't list everything ‚Äî land one thing." },
        { label:"CLOSE",  icon:"ü§ù", text: brand.hasDeal ? `And right now ‚Äî ${brand.deal}. It would be very smart to place a small order, because if it moves, you're locked in at this price. If it doesn't, which I doubt it won't, we'll give you a full credit refund. You're basically taking zero risk.` : `Let's start with a small order ‚Äî no minimums. If it moves, you'll know in the first week. If not, we'll swap it. Zero risk to you.`, tip:"'Zero risk' framing removes the last objection. Always mention the credit/swap option." },
      ];
      const isOpen = tab !== "closed";
      return (
        <div style={{ background:"white", borderRadius:16, marginBottom:10, border: brand.hasDeal ? "2px solid #FF6B3530" : "1.5px solid #EDEEF0", boxShadow:"0 1px 4px rgba(0,0,0,0.06)", overflow:"hidden" }}>
          <div style={{ padding:"13px 14px", cursor:"pointer" }} onClick={() => setTab(isOpen ? "closed" : "read")}>
            <div style={{ display:"grid", gridTemplateColumns:"40px 1fr auto", gap:10, alignItems:"center" }}>
              <div style={{ width:40, height:40, borderRadius:10, flexShrink:0, background:color, display:"flex", alignItems:"center", justifyContent:"center", fontSize:11, fontWeight:700, fontFamily:"DM Mono", color:"white" }}>{getInitials(brand.name)}</div>
              <div style={{ minWidth:0 }}>
                <div style={{ display:"flex", alignItems:"center", gap:6, flexWrap:"wrap", marginBottom:3 }}>
                  <span style={{ fontWeight:700, fontSize:13 }}>{brand.name}</span>
                  {brand.hasDeal && <DealBadge deal={brand.deal} />}
                </div>
                <div style={{ fontSize:11, color:"#555", lineHeight:1.3, marginBottom:4 }}>{brand.hook}</div>
                <div style={{ display:"flex", gap:4, flexWrap:"wrap" }}>
                  <span style={{ padding:"2px 7px", borderRadius:20, background:mc(brand.margin)+"15", color:mc(brand.margin), fontSize:10, fontFamily:"DM Mono", fontWeight:600, border:`1px solid ${mc(brand.margin)}25` }}>{brand.margin}% margin</span>
                  <span style={{ padding:"2px 7px", borderRadius:20, background:"#F8F9FA", color:"#888", fontSize:10, fontFamily:"DM Mono", border:"1px solid #EDEEF0" }}>{brand.retail}</span>
                </div>
              </div>
              <div style={{ fontSize:12, color:"#ccc" }}>{isOpen ? "‚ñ≤" : "‚ñº"}</div>
            </div>
          </div>
          {isOpen && (
            <div style={{ padding:"0 14px 14px", borderTop:"1px solid #F2F3F5" }}>
              <div style={{ display:"flex", gap:4, margin:"12px 0", background:"#F2F3F5", borderRadius:10, padding:4 }}>
                {[{k:"read",l:"üìã Quick Read"},{k:"script",l:"üéô Script"},{k:"closer",l:"üö™ Closer"}].map(t => (
                  <button key={t.k} onClick={() => setTab(t.k)} style={{ flex:1, padding:"7px 4px", border:"none", borderRadius:8, cursor:"pointer", fontFamily:"DM Sans", fontSize:11, fontWeight:600, background:tab===t.k?"white":"transparent", color:tab===t.k?"#111":"#888", boxShadow:tab===t.k?"0 1px 4px rgba(0,0,0,0.08)":"none", transition:"all 0.15s" }}>{t.l}</button>
                ))}
              </div>
              {tab === "read" && (
                <div>
                  <div style={{ background:`${color}10`, border:`1.5px solid ${color}25`, borderRadius:12, padding:"12px 14px", marginBottom:10 }}>
                    <div style={{ fontSize:10, fontFamily:"DM Mono", color, letterSpacing:"1px", marginBottom:5 }}>WHAT IS IT</div>
                    <div style={{ fontSize:12, color:"#555", marginBottom:8 }}>{brand.desc} ¬∑ {brand.type}</div>
                    <div style={{ display:"flex", gap:5, flexWrap:"wrap" }}>{brand.tags.map(t => <span key={t} style={{ padding:"2px 8px", borderRadius:20, background:"white", border:`1px solid ${color}30`, fontSize:10, color:"#444", fontFamily:"DM Mono" }}>{t}</span>)}</div>
                  </div>
                  <div style={{ background:"#FAFAFA", borderRadius:10, padding:"10px 12px", borderLeft:`3px solid ${color}`, marginBottom:10 }}>
                    <div style={{ fontSize:9, fontFamily:"DM Mono", color:"#aaa", letterSpacing:"1px", marginBottom:3 }}>WHY CUSTOMERS BUY IT</div>
                    <div style={{ fontSize:12, color:"#333", lineHeight:1.55 }}>{brand.why}</div>
                  </div>
                  <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr 1fr", gap:6 }}>
                    <div style={{ background:"white", border:"1px solid #EDEEF0", borderRadius:9, padding:"8px" }}><div style={{ fontSize:8, fontFamily:"DM Mono", color:"#ccc", marginBottom:2 }}>RETAIL</div><div style={{ fontSize:11, fontWeight:700, color:"#222" }}>{brand.retail}</div></div>
                    <div style={{ background:"white", border:"1px solid #EDEEF0", borderRadius:9, padding:"8px" }}><div style={{ fontSize:8, fontFamily:"DM Mono", color:"#ccc", marginBottom:2 }}>YOUR COST</div><div style={{ fontSize:11, fontWeight:700, color:"#222" }}>{brand.wholesale}</div></div>
                    <div style={{ background:mc(brand.margin)+"12", border:`1px solid ${mc(brand.margin)}25`, borderRadius:9, padding:"8px" }}><div style={{ fontSize:8, fontFamily:"DM Mono", color:mc(brand.margin), marginBottom:2 }}>MARGIN</div><div style={{ fontSize:15, fontWeight:800, color:mc(brand.margin) }}>{brand.margin}%</div></div>
                  </div>
                  {brand.hasDeal && <div style={{ marginTop:10, background:"#FFF7ED", border:"1.5px solid #FED7AA", borderRadius:10, padding:"10px 12px" }}><div style={{ fontSize:9, fontFamily:"DM Mono", color:"#C2410C", letterSpacing:"1px", marginBottom:3 }}>üî• ACTIVE DEAL</div><div style={{ fontSize:13, fontWeight:700, color:"#9A3412" }}>{brand.deal}</div><div style={{ fontSize:11, color:"#C2410C", marginTop:2 }}>Use this as your close ‚Äî mention it last, not first.</div></div>}
                </div>
              )}
              {tab === "script" && (
                <div>
                  <div style={{ display:"flex", gap:4, marginBottom:8 }}>
                    {scriptSteps.map((s,i) => <button key={i} onClick={() => setScriptStep(i)} style={{ flex:1, padding:"6px 0", border:"none", borderRadius:8, cursor:"pointer", background:scriptStep===i?color:"#F2F3F5", color:scriptStep===i?"white":"#999", fontSize:"9px", fontFamily:"DM Mono", fontWeight:600 }}>{s.label}</button>)}
                  </div>
                  <div style={{ background:`${color}08`, border:`1.5px solid ${color}22`, borderRadius:12, padding:"14px" }}>
                    <div style={{ fontSize:9, fontFamily:"DM Mono", color, letterSpacing:"1px", marginBottom:6 }}>{scriptSteps[scriptStep].icon} {scriptSteps[scriptStep].label}</div>
                    <p style={{ fontSize:13, color:"#111", lineHeight:1.65, fontStyle:"italic" }}>"{scriptSteps[scriptStep].text}"</p>
                    <div style={{ marginTop:8, padding:"6px 8px", borderRadius:7, background:"rgba(0,0,0,0.04)", fontSize:10, color:"#888" }}>üí° {scriptSteps[scriptStep].tip}</div>
                  </div>
                  <div style={{ display:"flex", justifyContent:"space-between", marginTop:8 }}>
                    <button onClick={() => setScriptStep(s => Math.max(0,s-1))} disabled={scriptStep===0} style={{ padding:"6px 14px", borderRadius:8, border:"1px solid #E5E7EB", background:"white", color:scriptStep===0?"#ddd":"#555", fontSize:11, cursor:scriptStep===0?"default":"pointer" }}>‚Üê Back</button>
                    {scriptStep < 3 ? <button onClick={() => setScriptStep(s => s+1)} style={{ padding:"6px 16px", borderRadius:8, border:"none", background:color, color:"white", fontSize:11, cursor:"pointer", fontWeight:600 }}>Next ‚Üí</button> : <div style={{ padding:"6px 12px", borderRadius:8, background:"#F0FDF4", color:"#059669", fontSize:11, fontWeight:600 }}>‚úì Done</div>}
                  </div>
                  <div style={{ marginTop:10, background:"#F0F9FF", border:"1px solid #BAE6FD", borderRadius:10, padding:"10px 12px" }}>
                    <div style={{ fontSize:9, fontFamily:"DM Mono", color:"#0284C7", letterSpacing:"1px", marginBottom:3 }}>FROM THE CATALOG</div>
                    <div style={{ fontSize:12, color:"#0C4A6E", lineHeight:1.5, fontStyle:"italic" }}>"{brand.pitchLine}"</div>
                  </div>
                </div>
              )}
              {tab === "closer" && (
                <div>
                  <div style={{ fontSize:10, fontFamily:"DM Mono", color:"#aaa", letterSpacing:"1px", marginBottom:8 }}>THEY SAID NO ‚Äî PICK YOUR MOVE</div>
                  <div style={{ display:"flex", flexDirection:"column", gap:6 }}>
                    {CLOSERS.map((c,i) => { const isSel = closerSel===i; return (
                      <div key={i} onClick={() => { setCloserSel(i); setCloserDone(false); }} style={{ borderRadius:10, padding:"10px 12px", cursor:"pointer", border:isSel?`2px solid ${color}`:"1.5px solid #EDEEF0", background:isSel?`${color}08`:"white" }}>
                        <div style={{ display:"flex", alignItems:"center", gap:8 }}><span style={{ fontSize:16 }}>{c.icon}</span><div style={{ flex:1, fontSize:12, fontWeight:600, color:isSel?color:"#222" }}>{c.label}</div><div style={{ width:16, height:16, borderRadius:"50%", border:isSel?"none":"1.5px solid #ddd", background:isSel?color:"transparent", display:"flex", alignItems:"center", justifyContent:"center" }}>{isSel&&<span style={{ color:"white", fontSize:9 }}>‚úì</span>}</div></div>
                      </div>
                    ); })}
                  </div>
                  {closerSel !== null && !closerDone && <div style={{ marginTop:10, background:"#FFFBEB", border:"1.5px solid #FDE68A", borderRadius:12, padding:"12px 14px" }}><div style={{ fontSize:9, fontFamily:"DM Mono", fontWeight:600, color:"#D97706", letterSpacing:"1px", marginBottom:6 }}>SAY THIS ‚Üí</div><p style={{ fontSize:13, color:"#333", lineHeight:1.65 }}>{CLOSERS[closerSel].script}</p><button onClick={() => setCloserDone(true)} style={{ marginTop:10, width:"100%", padding:"9px", borderRadius:8, border:"none", background:"#D97706", color:"white", fontSize:12, fontWeight:600, cursor:"pointer" }}>‚úì Offered ‚Äî move on</button></div>}
                  {closerDone && <div style={{ marginTop:10, background:"#F0FDF4", border:"1.5px solid #BBF7D0", borderRadius:12, padding:"12px", textAlign:"center" }}><div style={{ fontSize:20, marginBottom:3 }}>‚úÖ</div><div style={{ fontSize:13, fontWeight:600, color:"#059669" }}>{CLOSERS[closerSel].label} offered</div><div style={{ fontSize:11, color:"#777", marginTop:2 }}>Log this visit in RepRally before leaving.</div></div>}
                </div>
              )}
            </div>
          )}
        </div>
      );
    }

    const DM_TYPES = [
      {
        id:"owner", icon:"üëë", label:"Owner / Boss", signals:["Behind the register alone","Makes decisions on the spot","Says 'my store'","Older, been there a long time"],
        script:`"Hey, are you the owner? Perfect ‚Äî I wanted to speak with whoever makes the buying decisions here. I'm [name] from RepRally. We've got a couple of products that are flying off shelves in stores just like yours right now. Do you have 2 minutes?"`,
        tip:"Owners want ROI, not features. Lead with 'flying off shelves' + margin. Skip the small talk."
      },
      {
        id:"manager", icon:"üè∑Ô∏è", label:"Manager (not owner)", signals:["Directing staff","Has keys","Says 'I need to check with the owner'"],
        script:`"Hey, are you the manager? Great ‚Äî I'm [name] from RepRally, a distribution company. I have some deals on products that are trending right now. Who handles purchasing decisions here ‚Äî is that you, or someone else I should also speak with?"`,
        tip:"Qualify fast. If they can't approve an order, get the owner's name and schedule a time. Don't pitch hard to someone who can't say yes."
      },
      {
        id:"employee", icon:"üôã", label:"Just an employee", signals:["Says 'I just work here'","Young, new","Can't answer questions about inventory"],
        script:`"No worries! When is the owner or manager usually in? I have some deals I'd love to show them ‚Äî products that are selling really well in the area right now. Is there a good time to come back, or a number I can reach them at?"`,
        tip:"Don't pitch to someone who can't buy. Get the owner's name, schedule, and phone number. Come back when it counts."
      },
      {
        id:"skeptical", icon:"üòê", label:"Busy / dismissive", signals:["Doesn't make eye contact","Short answers","'I don't have time'"],
        script:`"I totally get it ‚Äî I'll be quick, 60 seconds. I'm [name] from RepRally. Two things: one, we carry [David Protein / Smackin' / OasisDubai Chocolate] ‚Äî they're flying right now. Two, there's a deal on them this week. If it's not interesting, no problem. But if it is, I can place the order right here."`,
        tip:"Respect their time out loud, then use it anyway. 60-second hook with a named product and a deal. If they don't bite in 60 sec, leave a card and go."
      },
    ];

    function WalkInGuide({ onFinish }) {
      const [step, setStep] = useState(0);
      const [selected, setSelected] = useState(new Set());
      const [storeStatus, setStoreStatus] = useState(null);
      const [dmType, setDmType] = useState(null);
      const toggleObs = id => setSelected(s => { const n = new Set(s); n.has(id) ? n.delete(id) : n.add(id); return n; });
      const recommendedBrands = useMemo(() => {
        if (selected.size === 0) return [];
        const scores = {};
        selected.forEach(obsId => { const obs = OBSERVATIONS.find(o => o.id === obsId); obs?.brands.forEach(b => { scores[b] = (scores[b]||0)+1; }); });
        return Object.entries(scores).sort((a,b)=>b[1]-a[1]).slice(0,6).map(([id]) => BRANDS.find(b=>b.id===id)).filter(Boolean);
      }, [selected]);
      const statusInfo = storeStatus ? STATUS_SCRIPTS[storeStatus] : null;
      const dmInfo = dmType ? DM_TYPES.find(d=>d.id===dmType) : null;
      const STEPS = ["üëÅ Observe","üë§ Find DM","üìä Status","üéØ Pitch"];
      return (
        <div>
          <div style={{ display:"flex", gap:4, marginBottom:16 }}>
            {STEPS.map((l,i) => (
              <div key={i} style={{ flex:1, textAlign:"center" }}>
                <div style={{ padding:"5px 0", borderRadius:8, fontSize:"9px", fontWeight:600, fontFamily:"DM Mono", background:step===i?"#111":step>i?"#F0FDF4":"#F2F3F5", color:step===i?"white":step>i?"#059669":"#bbb", border:step>i?"1px solid #BBF7D0":"none" }}>{step>i?"‚úì":l}</div>
              </div>
            ))}
          </div>

          {/* STEP 0 ‚Äî OBSERVE */}
          {step === 0 && (
            <div>
              <div style={{ background:"#F8F9FA", borderRadius:12, padding:"12px 14px", marginBottom:14 }}>
                <div style={{ fontSize:12, fontWeight:600, color:"#111", marginBottom:3 }}>Before you open your mouth ‚Äî</div>
                <div style={{ fontSize:12, color:"#666", lineHeight:1.5 }}>Spend 30 seconds scanning the store. Tap everything you notice ‚Äî this determines which brands to pitch.</div>
              </div>
              <div style={{ fontSize:10, fontFamily:"DM Mono", color:"#aaa", letterSpacing:"1px", marginBottom:8 }}>TAP WHAT YOU SEE ({selected.size} selected)</div>
              <div style={{ display:"flex", flexDirection:"column", gap:6 }}>
                {OBSERVATIONS.map(obs => { const isSel = selected.has(obs.id); return (
                  <div key={obs.id} onClick={() => toggleObs(obs.id)} style={{ borderRadius:12, padding:"11px 14px", cursor:"pointer", border:isSel?"2px solid #111":"1.5px solid #EDEEF0", background:isSel?"#F8F9FA":"white", display:"flex", alignItems:"center", gap:10 }}>
                    <span style={{ fontSize:18, flexShrink:0 }}>{obs.icon}</span>
                    <div style={{ flex:1 }}><div style={{ fontSize:12, fontWeight:600, color:"#222" }}>{obs.label}</div><div style={{ fontSize:11, color:"#999" }}>{obs.hint}</div></div>
                    <div style={{ width:20, height:20, borderRadius:6, flexShrink:0, background:isSel?"#111":"transparent", border:isSel?"none":"1.5px solid #ddd", display:"flex", alignItems:"center", justifyContent:"center" }}>{isSel&&<span style={{ color:"white", fontSize:12, fontWeight:700 }}>‚úì</span>}</div>
                  </div>
                ); })}
              </div>
              <button onClick={() => setStep(1)} disabled={selected.size===0} style={{ marginTop:14, width:"100%", padding:"12px", borderRadius:12, border:"none", background:selected.size>0?"#111":"#E5E7EB", color:selected.size>0?"white":"#aaa", fontSize:13, fontWeight:700, cursor:selected.size>0?"pointer":"default" }}>
                {selected.size > 0 ? `Next ‚Äî Find decision maker (${selected.size} observations)` : "Tap at least 1 thing you see"}
              </button>
            </div>
          )}

          {/* STEP 1 ‚Äî FIND DECISION MAKER */}
          {step === 1 && (
            <div>
              <div style={{ background:"#F8F9FA", borderRadius:12, padding:"12px 14px", marginBottom:14 }}>
                <div style={{ fontSize:12, fontWeight:600, color:"#111", marginBottom:3 }}>Who are you actually talking to?</div>
                <div style={{ fontSize:12, color:"#666", lineHeight:1.5 }}>Never pitch to someone who can't say yes. Identify the buyer first ‚Äî your opener changes completely based on who you're facing.</div>
              </div>
              <div style={{ background:"#FFF7ED", border:"1px solid #FED7AA", borderRadius:10, padding:"10px 12px", marginBottom:12 }}>
                <div style={{ fontSize:10, fontFamily:"DM Mono", color:"#C2410C", letterSpacing:"1px", marginBottom:4 }}>üéØ GOLDEN RULE</div>
                <div style={{ fontSize:12, color:"#444", lineHeight:1.5 }}>Always ask: <strong>"Are you the owner, or is there someone else who handles purchasing?"</strong> ‚Äî say this within the first 30 seconds.</div>
              </div>
              <div style={{ fontSize:10, fontFamily:"DM Mono", color:"#aaa", letterSpacing:"1px", marginBottom:8 }}>WHO DO YOU SEE? TAP TO GET YOUR SCRIPT</div>
              <div style={{ display:"flex", flexDirection:"column", gap:8 }}>
                {DM_TYPES.map(dm => { const isSel = dmType===dm.id; return (
                  <div key={dm.id} onClick={() => setDmType(dm.id)} style={{ borderRadius:12, padding:"12px 14px", cursor:"pointer", border:isSel?"2px solid #7C3AED":"1.5px solid #EDEEF0", background:isSel?"#FAF5FF":"white" }}>
                    <div style={{ display:"flex", alignItems:"flex-start", gap:10 }}>
                      <span style={{ fontSize:22, flexShrink:0, lineHeight:1 }}>{dm.icon}</span>
                      <div style={{ flex:1 }}>
                        <div style={{ fontSize:13, fontWeight:700, color:isSel?"#7C3AED":"#222", marginBottom:4 }}>{dm.label}</div>
                        <div style={{ display:"flex", gap:4, flexWrap:"wrap" }}>
                          {dm.signals.map((s,i) => <span key={i} style={{ padding:"2px 7px", borderRadius:20, background:isSel?"#EDE9FE":"#F2F3F5", color:isSel?"#6D28D9":"#777", fontSize:10, fontFamily:"DM Mono" }}>{s}</span>)}
                        </div>
                      </div>
                      <div style={{ width:20, height:20, borderRadius:"50%", border:isSel?"none":"1.5px solid #ddd", background:isSel?"#7C3AED":"transparent", display:"flex", alignItems:"center", justifyContent:"center", flexShrink:0 }}>{isSel&&<span style={{ color:"white", fontSize:10, fontWeight:700 }}>‚úì</span>}</div>
                    </div>
                  </div>
                ); })}
              </div>
              {dmInfo && (
                <div style={{ marginTop:12, background:"#FAF5FF", border:"1.5px solid #E9D5FF", borderRadius:12, padding:"13px 14px" }}>
                  <div style={{ fontSize:9, fontFamily:"DM Mono", color:"#7C3AED", letterSpacing:"1px", marginBottom:6 }}>SAY THIS ‚Üí</div>
                  <p style={{ fontSize:13, color:"#333", lineHeight:1.65, fontStyle:"italic" }}>{dmInfo.script}</p>
                  <div style={{ marginTop:8, padding:"6px 8px", borderRadius:7, background:"rgba(0,0,0,0.04)", fontSize:10, color:"#666" }}>üí° {dmInfo.tip}</div>
                </div>
              )}
              <div style={{ display:"flex", gap:8, marginTop:14 }}>
                <button onClick={() => setStep(0)} style={{ flex:1, padding:"10px", borderRadius:10, border:"1px solid #E5E7EB", background:"white", color:"#555", fontSize:12, cursor:"pointer" }}>‚Üê Back</button>
                <button onClick={() => setStep(2)} disabled={!dmType} style={{ flex:2, padding:"10px", borderRadius:10, border:"none", background:dmType?"#111":"#E5E7EB", color:dmType?"white":"#aaa", fontSize:13, fontWeight:700, cursor:dmType?"pointer":"default" }}>
                  {dmType==="employee" ? "Schedule a callback ‚Üí" : "Check store status ‚Üí"}
                </button>
              </div>
            </div>
          )}

          {/* STEP 2 ‚Äî STATUS */}
          {step === 2 && (
            <div>
              <div style={{ background:"#F8F9FA", borderRadius:12, padding:"12px 14px", marginBottom:14 }}>
                <div style={{ fontSize:12, fontWeight:600, color:"#111", marginBottom:3 }}>What's this store's order history?</div>
                <div style={{ fontSize:12, color:"#666", lineHeight:1.5 }}>Check RepRally before you walk in. Your opener completely changes based on this.</div>
              </div>
              <div style={{ fontSize:10, fontFamily:"DM Mono", color:"#aaa", letterSpacing:"1px", marginBottom:8 }}>SELECT STORE STATUS</div>
              <div style={{ display:"flex", flexDirection:"column", gap:8 }}>
                {Object.entries(STATUS_SCRIPTS).map(([key,s]) => { const isSel = storeStatus===key; return (
                  <div key={key} onClick={() => setStoreStatus(key)} style={{ borderRadius:12, padding:"13px 14px", cursor:"pointer", border:isSel?`2px solid ${s.color}`:"1.5px solid #EDEEF0", background:isSel?s.bg:"white" }}>
                    <div style={{ display:"flex", alignItems:"center", gap:10 }}>
                      <span style={{ fontSize:20, flexShrink:0 }}>{s.icon}</span>
                      <div style={{ flex:1 }}>
                        <div style={{ display:"flex", gap:8, alignItems:"center" }}><span style={{ fontSize:13, fontWeight:700, color:isSel?s.color:"#222" }}>{s.label}</span><span style={{ fontSize:10, fontFamily:"DM Mono", color:"#999" }}>{s.days}</span></div>
                        <div style={{ fontSize:11, color:"#777", marginTop:1 }}>{s.opener}</div>
                      </div>
                      <div style={{ width:20, height:20, borderRadius:"50%", border:isSel?"none":"1.5px solid #ddd", background:isSel?s.color:"transparent", display:"flex", alignItems:"center", justifyContent:"center", flexShrink:0 }}>{isSel&&<span style={{ color:"white", fontSize:10, fontWeight:700 }}>‚úì</span>}</div>
                    </div>
                  </div>
                ); })}
              </div>
              {statusInfo && (
                <div style={{ marginTop:12, background:statusInfo.bg, border:`1.5px solid ${statusInfo.border}`, borderRadius:12, padding:"13px 14px" }}>
                  <div style={{ fontSize:9, fontFamily:"DM Mono", color:statusInfo.color, letterSpacing:"1px", marginBottom:6 }}>YOUR OPENER ‚Üí</div>
                  <p style={{ fontSize:13, color:"#333", lineHeight:1.65, fontStyle:"italic" }}>{statusInfo.script}</p>
                  <div style={{ marginTop:8, padding:"6px 8px", borderRadius:7, background:"rgba(0,0,0,0.04)", fontSize:10, color:"#666" }}>üí° {statusInfo.tip}</div>
                </div>
              )}
              <div style={{ display:"flex", gap:8, marginTop:14 }}>
                <button onClick={() => setStep(1)} style={{ flex:1, padding:"10px", borderRadius:10, border:"1px solid #E5E7EB", background:"white", color:"#555", fontSize:12, cursor:"pointer" }}>‚Üê Back</button>
                <button onClick={() => setStep(3)} disabled={!storeStatus} style={{ flex:2, padding:"10px", borderRadius:10, border:"none", background:storeStatus?"#111":"#E5E7EB", color:storeStatus?"white":"#aaa", fontSize:13, fontWeight:700, cursor:storeStatus?"pointer":"default" }}>See your pitch list ‚Üí</button>
              </div>
            </div>
          )}

          {/* STEP 3 ‚Äî PITCH LIST */}
          {step === 3 && (
            <div>
              <div style={{ background:"#F0FDF4", border:"1px solid #BBF7D0", borderRadius:12, padding:"12px 14px", marginBottom:14 }}>
                <div style={{ fontSize:12, fontWeight:700, color:"#059669", marginBottom:2 }}>Your recommended pitch order</div>
                <div style={{ fontSize:11, color:"#666" }}>Based on {selected.size} observations. Lead with deals ‚Äî they close faster.</div>
              </div>
              {recommendedBrands.length === 0 ? <div style={{ textAlign:"center", padding:30, color:"#aaa" }}>No brands matched ‚Äî try adding more observations.</div> : recommendedBrands.map(brand => <BrandCard key={brand.id} brand={brand} />)}
              <div style={{ display:"flex", gap:8, marginTop:8 }}>
                <button onClick={() => setStep(2)} style={{ flex:1, padding:"10px", borderRadius:10, border:"1px solid #E5E7EB", background:"white", color:"#555", fontSize:12, cursor:"pointer" }}>‚Üê Back</button>
                <button onClick={() => onFinish && onFinish()} style={{ flex:1, padding:"10px", borderRadius:10, border:"none", background:"#111", color:"white", fontSize:12, fontWeight:600, cursor:"pointer" }}>Browse all ‚Üí</button>
              </div>
            </div>
          )}
        </div>
      );
    }

    function ObjectionScreen() {
      const [active, setActive] = useState(null);
      return (
        <div>
          <div style={{ background:"#FEF2F2", border:"1px solid #FECACA", borderRadius:12, padding:"12px 14px", marginBottom:14 }}>
            <div style={{ fontSize:12, fontWeight:700, color:"#DC2626", marginBottom:2 }}>They're pushing back?</div>
            <div style={{ fontSize:11, color:"#666" }}>Key principle: always lead them back to the deals. Throw deals at them until they hang up and say no.</div>
          </div>
          {OBJECTIONS.map(obj => (
            <div key={obj.id} style={{ marginBottom:8 }}>
              <div onClick={() => setActive(active===obj.id?null:obj.id)} style={{ borderRadius:12, padding:"12px 14px", cursor:"pointer", border:active===obj.id?"2px solid #EF476F":"1.5px solid #EDEEF0", background:active===obj.id?"#FEF2F2":"white", display:"flex", alignItems:"center", gap:8 }}>
                <span style={{ fontSize:16, flexShrink:0 }}>üöß</span>
                <span style={{ flex:1, fontSize:12, fontWeight:600, color:active===obj.id?"#DC2626":"#222" }}>"{obj.trigger}"</span>
                <span style={{ fontSize:12, color:"#ccc" }}>{active===obj.id?"‚ñ≤":"‚ñº"}</span>
              </div>
              {active===obj.id && (
                <div style={{ borderRadius:"0 0 12px 12px", padding:"12px 14px", background:"#FFF7F7", border:"1.5px solid #FECACA", borderTop:"none", marginTop:-4 }}>
                  <div style={{ fontSize:9, fontFamily:"DM Mono", color:"#DC2626", letterSpacing:"1px", marginBottom:6 }}>SAY THIS ‚Üí</div>
                  <p style={{ fontSize:13, color:"#333", lineHeight:1.65 }}>{obj.response}</p>
                  <div style={{ marginTop:8, padding:"6px 8px", borderRadius:7, background:"rgba(0,0,0,0.04)", fontSize:10, color:"#888" }}>üí° {obj.tip}</div>
                </div>
              )}
            </div>
          ))}
        </div>
      );
    }

    function CatalogScreen({ initialStoreType }) {
      const [storeType, setStoreType] = useState(initialStoreType || null);
      const [query, setQuery] = useState("");
      const [view, setView] = useState("cards");

      const storeInfo = storeType ? STORE_TYPES.find(s => s.id === storeType) : null;

      const filtered = useMemo(() => {
        const q = query.toLowerCase().trim();
        let pool = [...BRANDS].sort((a,b) => (b.hasDeal?1:0)-(a.hasDeal?1:0));
        if (storeInfo) pool = pool.filter(b => storeInfo.brands.includes(b.id));
        if (!q) return pool;
        return pool.filter(b =>
          b.name.toLowerCase().includes(q) ||
          b.type.toLowerCase().includes(q) ||
          b.desc.toLowerCase().includes(q) ||
          b.retail.includes(q) ||
          b.wholesale.includes(q) ||
          (b.deal && b.deal.toLowerCase().includes(q))
        );
      }, [query, storeType]);

      // Store type picker screen
      if (!storeType) {
        return (
          <div>
            <div style={{ fontSize:13, color:"#666", marginBottom:16, lineHeight:1.5 }}>Select the store type you're walking into.</div>
            <div style={{ display:"flex", flexDirection:"column", gap:8 }}>
              {STORE_TYPES.map(st => (
                <div key={st.id} onClick={() => setStoreType(st.id)} style={{ background:"white", borderRadius:16, padding:"14px 16px", cursor:"pointer", border:"1.5px solid #EDEEF0", display:"flex", alignItems:"center", gap:14, boxShadow:"0 1px 3px rgba(0,0,0,0.04)" }}>
                  <div style={{ width:48, height:48, borderRadius:12, background:st.bg, border:`1px solid ${st.color}20`, display:"flex", alignItems:"center", justifyContent:"center", fontSize:24, flexShrink:0 }}>{st.icon}</div>
                  <div style={{ flex:1 }}>
                    <div style={{ fontSize:15, fontWeight:700, color:"#111", marginBottom:2 }}>{st.label}</div>
                    <div style={{ fontSize:12, color:"#999" }}>{st.brands.length} brands ready to pitch</div>
                  </div>
                  <div style={{ fontSize:16, color:"#ddd" }}>‚Ä∫</div>
                </div>
              ))}
            </div>
          </div>
        );
      }

      // Brand list screen (after store type selected)
      return (
        <div>
          {/* Store type header + back */}
          <div style={{ display:"flex", alignItems:"center", gap:10, marginBottom:12, background:"white", borderRadius:12, padding:"10px 14px", border:`1.5px solid ${storeInfo.color}30` }}>
            <div style={{ width:36, height:36, borderRadius:10, background:storeInfo.bg, display:"flex", alignItems:"center", justifyContent:"center", fontSize:20, flexShrink:0 }}>{storeInfo.icon}</div>
            <div style={{ flex:1 }}>
              <div style={{ fontSize:13, fontWeight:700, color:"#111" }}>{storeInfo.label}</div>
              <div style={{ fontSize:11, color:"#999" }}>{storeInfo.brands.length} brands for this store type</div>
            </div>
            <button onClick={() => { setStoreType(null); setQuery(""); }} style={{ fontSize:11, color:storeInfo.color, background:storeInfo.bg, border:`1px solid ${storeInfo.color}30`, borderRadius:8, padding:"4px 10px", cursor:"pointer", fontWeight:600, fontFamily:"DM Sans" }}>Change</button>
          </div>

          {/* Search bar */}
          <div style={{ position:"relative", marginBottom:10 }}>
            <span style={{ position:"absolute", left:12, top:"50%", transform:"translateY(-50%)", fontSize:14, color:"#aaa" }}>üîç</span>
            <input value={query} onChange={e => setQuery(e.target.value)} placeholder="Search brand, type, or price‚Ä¶"
              style={{ width:"100%", padding:"10px 12px 10px 36px", borderRadius:12, border:"1.5px solid #EDEEF0", background:"white", fontSize:13, fontFamily:"DM Sans", color:"#111", outline:"none" }} />
            {query && <button onClick={() => setQuery("")} style={{ position:"absolute", right:10, top:"50%", transform:"translateY(-50%)", background:"none", border:"none", cursor:"pointer", color:"#aaa", fontSize:16, lineHeight:1 }}>√ó</button>}
          </div>

          {/* View toggle */}
          <div style={{ display:"flex", gap:4, marginBottom:12, background:"#F2F3F5", borderRadius:10, padding:4 }}>
            <button onClick={() => setView("cards")} style={{ flex:1, padding:"7px", border:"none", borderRadius:8, cursor:"pointer", fontFamily:"DM Sans", fontSize:11, fontWeight:600, background:view==="cards"?"white":"transparent", color:view==="cards"?"#111":"#888", boxShadow:view==="cards"?"0 1px 4px rgba(0,0,0,0.08)":"none" }}>üì¶ Brand Cards</button>
            <button onClick={() => setView("prices")} style={{ flex:1, padding:"7px", border:"none", borderRadius:8, cursor:"pointer", fontFamily:"DM Sans", fontSize:11, fontWeight:600, background:view==="prices"?"white":"transparent", color:view==="prices"?"#111":"#888", boxShadow:view==="prices"?"0 1px 4px rgba(0,0,0,0.08)":"none" }}>üí∞ Price Lookup</button>
          </div>

          <div style={{ fontSize:10, fontFamily:"DM Mono", color:"#aaa", letterSpacing:"1px", marginBottom:10 }}>
            {filtered.length} BRAND{filtered.length!==1?"S":""} {query ? `MATCHING "${query.toUpperCase()}"` : `¬∑ ${filtered.filter(b=>b.hasDeal).length} WITH ACTIVE DEALS`}
          </div>

          {filtered.length === 0 && (
            <div style={{ textAlign:"center", padding:"40px 20px", color:"#bbb" }}>
              <div style={{ fontSize:32, marginBottom:8 }}>üîç</div>
              <div style={{ fontSize:13, fontWeight:600 }}>No brands found</div>
              <div style={{ fontSize:11, marginTop:4 }}>Try searching by name, category, or price like "$4"</div>
            </div>
          )}

          {view === "cards" && filtered.map(brand => <BrandCard key={brand.id} brand={brand} />)}

          {view === "prices" && filtered.length > 0 && (
            <div>
              <div style={{ display:"flex", gap:6, marginBottom:12, flexWrap:"wrap" }}>
                {[
                  { label:`${filtered.filter(b=>b.hasDeal).length} active deals`, color:"#FF6B35", bg:"#FFF4EF" },
                  { label:`Margins: ${Math.min(...filtered.map(b=>b.margin))}‚Äì${Math.max(...filtered.map(b=>b.margin))}%`, color:"#059669", bg:"#F0FDF4" },
                  { label:`${filtered.length} brands`, color:"#0284C7", bg:"#F0F9FF" },
                ].map((c,i) => <span key={i} style={{ padding:"3px 10px", borderRadius:20, fontSize:10, fontFamily:"DM Mono", fontWeight:600, color:c.color, background:c.bg }}>{c.label}</span>)}
              </div>
              <div style={{ background:"white", borderRadius:14, border:"1.5px solid #EDEEF0", overflow:"hidden" }}>
                <div style={{ display:"grid", gridTemplateColumns:"1fr 70px 70px 52px", padding:"8px 12px", background:"#F8F9FA", borderBottom:"1px solid #EDEEF0" }}>
                  <div style={{ fontSize:9, fontFamily:"DM Mono", color:"#999", letterSpacing:"0.8px" }}>BRAND</div>
                  <div style={{ fontSize:9, fontFamily:"DM Mono", color:"#999", letterSpacing:"0.8px", textAlign:"right" }}>RETAIL</div>
                  <div style={{ fontSize:9, fontFamily:"DM Mono", color:"#999", letterSpacing:"0.8px", textAlign:"right" }}>YOUR COST</div>
                  <div style={{ fontSize:9, fontFamily:"DM Mono", color:"#999", letterSpacing:"0.8px", textAlign:"right" }}>MARGIN</div>
                </div>
                {filtered.map((brand, i) => (
                  <div key={brand.id} style={{ display:"grid", gridTemplateColumns:"1fr 70px 70px 52px", padding:"10px 12px", borderBottom: i < filtered.length-1 ? "1px solid #F2F3F5":"none" }}>
                    <div>
                      <div style={{ display:"flex", alignItems:"center", gap:6, marginBottom:1 }}>
                        <div style={{ width:6, height:6, borderRadius:"50%", background:brandColor(brand.id), flexShrink:0 }} />
                        <span style={{ fontSize:12, fontWeight:600, color:"#111" }}>{brand.name}</span>
                        {brand.hasDeal && <span style={{ fontSize:8, fontFamily:"DM Mono", color:"#FF6B35", fontWeight:700 }}>üî•DEAL</span>}
                      </div>
                      <div style={{ fontSize:10, color:"#aaa", paddingLeft:12 }}>{brand.type}</div>
                      {brand.hasDeal && <div style={{ fontSize:9, color:"#FF6B35", fontFamily:"DM Mono", paddingLeft:12, marginTop:1 }}>{brand.deal}</div>}
                    </div>
                    <div style={{ textAlign:"right", fontFamily:"DM Mono", fontSize:11, fontWeight:600, color:"#111", alignSelf:"center" }}>{brand.retail}</div>
                    <div style={{ textAlign:"right", fontFamily:"DM Mono", fontSize:11, color:"#555", alignSelf:"center" }}>{brand.wholesale}</div>
                    <div style={{ textAlign:"right", alignSelf:"center" }}><span style={{ fontFamily:"DM Mono", fontSize:12, fontWeight:800, color:mc(brand.margin) }}>{brand.margin}%</span></div>
                  </div>
                ))}
              </div>
              <div style={{ marginTop:10, fontSize:10, color:"#aaa", textAlign:"center", fontFamily:"DM Mono" }}>Wholesale = your cost per unit ¬∑ Retail = suggested sell price</div>
            </div>
          )}
        </div>
      );
    }

    const TACTICS_DATA = {
      tactic1: {
        id:"t1", label:"Tactic 1 ‚Äî Product-Led",
        color:"#3A86FF", bg:"#EFF6FF", border:"#BFDBFE",
        icon:"üì¶",
        headline:"Lead with the product. Make it irresistible.",
        logic:`"The product should sell itself ‚Äî if I make it attractive enough."`,
        when:"Use when the owner doesn't know the brand. Lead with what it is, why it's trending, and the deal. Fast, punchy, 20 seconds.",
        cues:["First-time store","New brand they've never heard of","Short attention span","Browsing, not asking"],
      },
      tactic2: {
        id:"t2", label:"Tactic 2 ‚Äî Outcome-Driven",
        color:"#059669", bg:"#F0FDF4", border:"#BBF7D0",
        icon:"üí∞",
        headline:"Lead with money. Solve their business problem.",
        logic:`"I understand how your store makes money ‚Äî and I can improve it."`,
        when:"Use when the owner is money-focused or skeptical. Skip the product story. Go straight to: this will make you $X extra per week. Show the math.",
        cues:["Owner asks 'how much does it cost?'","Business is slow","They've heard too many pitches","Veteran store owner"],
      },
    };

    const TACTICS_PITCHES = [
      {
        id:"david", name:"David Protein Bar", emoji:"üí™",
        t1:`"This is David Protein ‚Äî 28g protein, 150 calories, no blood sugar crash. It just became the #1 selling protein bar in the entire US. There's a B5G1 deal right now. Your fitness customers are going to ask for it by name. You'd be crazy not to have it on the shelf."`,
        t2:`"Stores like yours nearby are making an extra $150‚Äì200 a week just from their protein bar section since they added David. It's the #1 in the country ‚Äî your customers are already buying it somewhere else. Put it near the register. B5G1 deal right now so you barely risk anything."`,
      },
      {
        id:"gngr", name:"GNGR Ginger Shot", emoji:"ü´ö",
        t1:`"This is GNGR ‚Äî a 2oz organic ginger immunity shot. Shelf stable, no fridge needed. Sales grew 25% last year, and there's a Buy 4 Get 1 Free deal right now. Your health-conscious customers will grab it on the spot ‚Äî it's like Emergen-C but real food."`,
        t2:`"Your wellness customers are already spending money on immunity shots ‚Äî but somewhere else. GNGR sits on the counter, no cold chain, no spoilage. It sells for $5, costs you under $2. Buy 4 Get 1 Free right now. That's a category you can own in your store this week."`,
      },
      {
        id:"tbd", name:"TBD Green Tea Lemonade", emoji:"üçµ",
        t1:`"TBD is organic CBD green tea lemonade ‚Äî low sugar, low cal, 20mg CBD. It's the healthy drink with a function. 20% intro discount right now. Customers who try it always reorder. It's a premium drink that stands out on your shelf immediately."`,
        t2:`"CBD drinks are one of the fastest growing beverage categories in convenience right now. You probably don't have one yet ‚Äî TBD is how you get in. 20% intro discount, and CBD creates a habit ‚Äî once customers start buying it here, they keep coming back. You'd own a new category in your store."`,
      },
      {
        id:"oasis", name:"OasisDubai Chocolate", emoji:"üç´",
        t1:`"OasisDubai is the viral Dubai chocolate ‚Äî pistachio kataifi cream filling ‚Äî the one that broke TikTok with 50 million views. 87% reorder rate. Customers come in specifically hunting for it. You won't be able to keep it stocked."`,
        t2:`"87% reorder rate means this chocolate brings people back. Not just to buy the chocolate ‚Äî they come back and buy other things too. Stores near you are using it as a traffic magnet. You get a new type of customer you didn't have before. First to carry it in your area wins."`,
      },
    ];

    const PUSHBACKS = [
      { q:"I don't know what RepRally is. Where are you calling from?", a:`"We're RepRally ‚Äî a distribution company. You might know us from brands like David Protein Bar, Smackin' sunflower seeds, or OasisDubai Chocolate. We work with stores like yours in your area. We handle fulfilment, and you can order directly through our store portal or through one of our reps."` },
      { q:"Business is slow. I don't need anything right now.", a:`"I hear you ‚Äî that's actually exactly why I'm calling. I'm working with stores like yours in your area that are slow, and they're using new products to bring in customers they didn't have before. Give me 2 minutes ‚Äî I have something that's been moving even in slower stores."` },
      { q:"Your pricing is bad.", a:`"Which products specifically? How much are you getting them for? [Listen.] If someone's cheaper, you should buy from them. But we have 350+ brands, and our top products have pricing and deals you won't find elsewhere. Just take a look at what's moving right now."` },
      { q:"My last rep was bad.", a:`"That's not okay, and I'm sorry. What happened? [Listen.] That's not the experience we want to provide. I'm here to fix it ‚Äî I can either send you a different rep or set you up on our store portal so you can order directly, no rep needed. There's a $300 buy, get $50 off deal right now while we rebuild that trust."` },
      { q:"It's slow right now.", a:`"Totally get it. Just so you know, our catalog only shows products legal in your state, no compliance risk. And we have zero order minimums ‚Äî you can start with a few units, no commitment. Want me to send you a link to browse on your own time?"` },
      { q:"Products I bought from you last time didn't sell.", a:`"How many days since they arrived? [Under 60:] Give it a couple more weeks ‚Äî sometimes it takes a few. [Over 60:] I'll get a rep to pick them up and give you a full credit. Credits expire in 30 days, so let's look at what's moving right now while we're talking."` },
      { q:"The products came damaged.", a:`"I'm really sorry ‚Äî that shouldn't happen. Can you send me photos? I'll escalate to operations right now. And once the credit is issued, I have something hot I'd love to put in its place ‚Äî zero risk, full refund if it doesn't move."` },
      { q:"Shipping takes too long.", a:`"That's unusual for us. Which brand was it? I'll flag it with the team to make sure it doesn't repeat. In the meantime, let me show you a few brands from a different fulfillment center that ships next-day in your area."` },
      { q:"I'm good on everything.", a:`"What are you interested in? I'm working with stores just like yours and I know what's moving right now. I can send you a catalog link ‚Äî you can browse on your own time, no rep pressure. And we don't have order minimums, so there's really nothing to lose by trying one thing."` },
    ];

    function TacticsScreen() {
      const [tab, setTab] = useState("learn");          // learn | practice | pushback
      const [activeTactic, setActiveTactic] = useState("tactic1");
      const [activeProd, setActiveProd] = useState("david");
      const [showT2, setShowT2] = useState(false);
      const [activePB, setActivePB] = useState(null);

      const tInfo = TACTICS_DATA[activeTactic];
      const pitch = TACTICS_PITCHES.find(p => p.id === activeProd);

      return (
        <div>
          {/* Tab bar */}
          <div style={{ display:"flex", gap:4, marginBottom:14, background:"#F2F3F5", borderRadius:10, padding:4 }}>
            {[{k:"learn",l:"üìò Learn"},{k:"practice",l:"üéô Practice"},{k:"pushback",l:"üõ° Pushback"}].map(t => (
              <button key={t.k} onClick={() => setTab(t.k)} style={{ flex:1, padding:"7px 4px", border:"none", borderRadius:8, cursor:"pointer", fontFamily:"DM Sans", fontSize:11, fontWeight:600, background:tab===t.k?"white":"transparent", color:tab===t.k?"#111":"#888", boxShadow:tab===t.k?"0 1px 4px rgba(0,0,0,0.08)":"none" }}>{t.l}</button>
            ))}
          </div>

          {/* LEARN TAB */}
          {tab === "learn" && (
            <div>
              <div style={{ background:"#F8F9FA", borderRadius:12, padding:"12px 14px", marginBottom:14 }}>
                <div style={{ fontSize:12, fontWeight:600, color:"#111", marginBottom:3 }}>Two ways to sell. Know the difference.</div>
                <div style={{ fontSize:12, color:"#666", lineHeight:1.5 }}>Good salespeople don't push ‚Äî they solve problems. These two tactics do that differently. Master both.</div>
              </div>
              {Object.values(TACTICS_DATA).map(t => (
                <div key={t.id} style={{ background:"white", borderRadius:14, padding:"14px", border:`1.5px solid ${t.border}`, marginBottom:10 }}>
                  <div style={{ display:"flex", alignItems:"center", gap:8, marginBottom:8 }}>
                    <span style={{ fontSize:22 }}>{t.icon}</span>
                    <div>
                      <div style={{ fontSize:13, fontWeight:700, color:t.color }}>{t.label}</div>
                      <div style={{ fontSize:11, color:"#888" }}>{t.headline}</div>
                    </div>
                  </div>
                  <div style={{ background:t.bg, borderRadius:9, padding:"9px 11px", marginBottom:8 }}>
                    <div style={{ fontSize:10, fontFamily:"DM Mono", color:t.color, letterSpacing:"1px", marginBottom:3 }}>CORE LOGIC</div>
                    <div style={{ fontSize:12, color:"#333", fontStyle:"italic" }}>{t.logic}</div>
                  </div>
                  <div style={{ fontSize:12, color:"#555", lineHeight:1.5, marginBottom:8 }}>{t.when}</div>
                  <div style={{ fontSize:10, fontFamily:"DM Mono", color:"#aaa", letterSpacing:"1px", marginBottom:5 }}>USE WHEN YOU NOTICE:</div>
                  <div style={{ display:"flex", gap:4, flexWrap:"wrap" }}>
                    {t.cues.map((c,i) => <span key={i} style={{ padding:"2px 8px", borderRadius:20, background:t.bg, border:`1px solid ${t.border}`, fontSize:10, color:t.color, fontFamily:"DM Mono" }}>{c}</span>)}
                  </div>
                </div>
              ))}
              <div style={{ background:"#FFF7ED", border:"1px solid #FED7AA", borderRadius:12, padding:"11px 13px" }}>
                <div style={{ fontSize:10, fontFamily:"DM Mono", color:"#C2410C", letterSpacing:"1px", marginBottom:4 }}>üéØ THE RULE</div>
                <div style={{ fontSize:12, color:"#444", lineHeight:1.5 }}>Start with Tactic 2 if they seem money-focused or skeptical. Use Tactic 1 if they're curious or open. If Tactic 1 gets no reaction, flip to Tactic 2 immediately.</div>
              </div>
            </div>
          )}

          {/* PRACTICE TAB */}
          {tab === "practice" && (
            <div>
              <div style={{ fontSize:10, fontFamily:"DM Mono", color:"#aaa", letterSpacing:"1px", marginBottom:8 }}>PICK A PRODUCT</div>
              <div style={{ display:"flex", gap:6, marginBottom:14, flexWrap:"wrap" }}>
                {TACTICS_PITCHES.map(p => (
                  <button key={p.id} onClick={() => { setActiveProd(p.id); setShowT2(false); }} style={{ padding:"6px 12px", borderRadius:20, border: activeProd===p.id ? "2px solid #111" : "1.5px solid #EDEEF0", background: activeProd===p.id ? "#111" : "white", color: activeProd===p.id ? "white" : "#555", fontSize:11, fontWeight:600, cursor:"pointer", fontFamily:"DM Sans" }}>{p.emoji} {p.name}</button>
                ))}
              </div>

              {/* Tactic toggle */}
              <div style={{ display:"flex", gap:4, marginBottom:12, background:"#F2F3F5", borderRadius:10, padding:4 }}>
                <button onClick={() => setShowT2(false)} style={{ flex:1, padding:"7px", border:"none", borderRadius:8, cursor:"pointer", fontFamily:"DM Sans", fontSize:11, fontWeight:600, background:!showT2?"white":"transparent", color:!showT2?"#3A86FF":"#888", boxShadow:!showT2?"0 1px 4px rgba(0,0,0,0.08)":"none" }}>üì¶ Tactic 1 ‚Äî Product</button>
                <button onClick={() => setShowT2(true)} style={{ flex:1, padding:"7px", border:"none", borderRadius:8, cursor:"pointer", fontFamily:"DM Sans", fontSize:11, fontWeight:600, background:showT2?"white":"transparent", color:showT2?"#059669":"#888", boxShadow:showT2?"0 1px 4px rgba(0,0,0,0.08)":"none" }}>üí∞ Tactic 2 ‚Äî Outcome</button>
              </div>

              {pitch && (
                <div>
                  <div style={{ background: !showT2 ? "#EFF6FF" : "#F0FDF4", border:`1.5px solid ${!showT2?"#BFDBFE":"#BBF7D0"}`, borderRadius:14, padding:"14px" }}>
                    <div style={{ display:"flex", alignItems:"center", gap:6, marginBottom:8 }}>
                      <span style={{ fontSize:18 }}>{pitch.emoji}</span>
                      <div>
                        <div style={{ fontSize:12, fontWeight:700, color: !showT2 ? "#3A86FF" : "#059669" }}>{pitch.name}</div>
                        <div style={{ fontSize:10, color:"#888", fontFamily:"DM Mono" }}>{!showT2 ? "TACTIC 1 ‚Äî PRODUCT-LED" : "TACTIC 2 ‚Äî OUTCOME-DRIVEN"}</div>
                      </div>
                      <div style={{ marginLeft:"auto", background: !showT2?"#3A86FF":"#059669", color:"white", borderRadius:20, padding:"2px 9px", fontSize:9, fontFamily:"DM Mono", fontWeight:700 }}>20 SEC</div>
                    </div>
                    <p style={{ fontSize:13, color:"#111", lineHeight:1.7, fontStyle:"italic" }}>{!showT2 ? pitch.t1 : pitch.t2}</p>
                    <div style={{ marginTop:10, padding:"6px 8px", borderRadius:7, background:"rgba(0,0,0,0.04)", fontSize:10, color:"#666" }}>
                      üí° {!showT2 ? "Hook with the product facts. Close with the deal. Keep it under 20 seconds." : "Skip the product story. Lead with the business outcome. Make them see the money."}
                    </div>
                  </div>
                  <div style={{ marginTop:10, background:"#FFFBEB", border:"1px solid #FDE68A", borderRadius:10, padding:"10px 12px" }}>
                    <div style={{ fontSize:9, fontFamily:"DM Mono", color:"#D97706", letterSpacing:"1px", marginBottom:4 }}>üîÅ BOTH VERSIONS SIDE BY SIDE</div>
                    <div style={{ fontSize:11, color:"#555", lineHeight:1.5 }}>Memorize both ‚Äî start with whichever fits the owner's vibe. If one doesn't land in 10 seconds, flip to the other.</div>
                  </div>
                </div>
              )}
            </div>
          )}

          {/* PUSHBACK TAB */}
          {tab === "pushback" && (
            <div>
              <div style={{ background:"#FEF2F2", border:"1px solid #FECACA", borderRadius:12, padding:"11px 13px", marginBottom:14 }}>
                <div style={{ fontSize:12, fontWeight:700, color:"#DC2626", marginBottom:2 }}>Common pushback. Have these ready.</div>
                <div style={{ fontSize:11, color:"#666", lineHeight:1.5 }}>Good salespeople treat every objection as a signal, not a rejection. Each one tells you what the owner actually needs.</div>
              </div>
              {PUSHBACKS.map((pb, i) => (
                <div key={i} style={{ marginBottom:8 }}>
                  <div onClick={() => setActivePB(activePB===i?null:i)} style={{ borderRadius:12, padding:"12px 14px", cursor:"pointer", border:activePB===i?"2px solid #7C3AED":"1.5px solid #EDEEF0", background:activePB===i?"#FAF5FF":"white", display:"flex", alignItems:"flex-start", gap:8 }}>
                    <span style={{ fontSize:14, flexShrink:0, marginTop:1 }}>üí¨</span>
                    <span style={{ flex:1, fontSize:12, fontWeight:600, color:activePB===i?"#7C3AED":"#222", lineHeight:1.4 }}>"{pb.q}"</span>
                    <span style={{ fontSize:12, color:"#ccc", flexShrink:0 }}>{activePB===i?"‚ñ≤":"‚ñº"}</span>
                  </div>
                  {activePB===i && (
                    <div style={{ borderRadius:"0 0 12px 12px", padding:"12px 14px", background:"#F5F3FF", border:"1.5px solid #E9D5FF", borderTop:"none", marginTop:-4 }}>
                      <div style={{ fontSize:9, fontFamily:"DM Mono", color:"#7C3AED", letterSpacing:"1px", marginBottom:6 }}>SAY THIS ‚Üí</div>
                      <p style={{ fontSize:13, color:"#333", lineHeight:1.65 }}>{pb.a}</p>
                    </div>
                  )}
                </div>
              ))}
            </div>
          )}
        </div>
      );
    }

    function App() {
      const [screen, setScreen] = useState("home");
      const TITLES = { home:"RepRally Sales Tool", walkin:"Walk-In Guide", catalog:"What to Pitch", objections:"Objection Handlers", tactics:"Sales Tactics" };
      return (
        <div style={{ fontFamily:"'DM Sans','Helvetica Neue',sans-serif", background:"#F2F3F5", minHeight:"100vh", color:"#111", maxWidth:420, margin:"0 auto" }}>
          <div style={{ background:"white", borderBottom:"1px solid #EDEEF0", padding:"12px 16px", position:"sticky", top:0, zIndex:10 }}>
            <div style={{ display:"flex", alignItems:"center", gap:10 }}>
              {screen !== "home" && <button onClick={() => setScreen("home")} style={{ background:"none", border:"none", cursor:"pointer", color:"#555", fontSize:20, padding:"0 4px 0 0", lineHeight:1 }}>‚Äπ</button>}
              <div style={{ flex:1, fontSize:15, fontWeight:700, letterSpacing:"-0.3px" }}>{TITLES[screen]}</div>
              <div style={{ fontSize:10, fontFamily:"DM Mono", color:"#bbb" }}>RepRally</div>
            </div>
          </div>
          <div style={{ padding:"14px 14px 40px" }}>
            {screen === "home" && (
              <div>
                <div onClick={() => setScreen("walkin")} style={{ background:"#111", borderRadius:16, padding:"20px 18px", marginBottom:12, cursor:"pointer", position:"relative", overflow:"hidden" }}>
                  <div style={{ position:"absolute", right:12, top:12, fontSize:48, opacity:0.07 }}>üö∂</div>
                  <div style={{ fontSize:10, fontFamily:"DM Mono", color:"#aaa", letterSpacing:"1px", marginBottom:6 }}>STEP 1 ‚Äî START HERE</div>
                  <div style={{ fontSize:18, fontWeight:800, color:"white", marginBottom:5, letterSpacing:"-0.4px" }}>Walk Into a Store</div>
                  <div style={{ fontSize:12, color:"#888", lineHeight:1.5 }}>Observe shelves ‚Üí check store status ‚Üí get your pitch list</div>
                  <div style={{ marginTop:12, display:"inline-flex", alignItems:"center", gap:6, background:"white", color:"#111", padding:"6px 14px", borderRadius:20, fontSize:12, fontWeight:700 }}>Start guide ‚Üí</div>
                </div>
                <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr", gap:8, marginBottom:14 }}>
                  <div onClick={() => setScreen("catalog")} style={{ background:"white", borderRadius:14, padding:"14px", cursor:"pointer", border:"1.5px solid #EDEEF0" }}><div style={{ fontSize:22, marginBottom:6 }}>üì¶</div><div style={{ fontSize:13, fontWeight:700, marginBottom:2 }}>What to Pitch</div><div style={{ fontSize:11, color:"#999" }}>By store type</div></div>
                  <div onClick={() => setScreen("objections")} style={{ background:"white", borderRadius:14, padding:"14px", cursor:"pointer", border:"1.5px solid #EDEEF0" }}><div style={{ fontSize:22, marginBottom:6 }}>üöß</div><div style={{ fontSize:13, fontWeight:700, marginBottom:2 }}>Objections</div><div style={{ fontSize:11, color:"#999" }}>{OBJECTIONS.length} scripts ready</div></div>
                  <div onClick={() => setScreen("tactics")} style={{ background:"white", borderRadius:14, padding:"14px", cursor:"pointer", border:"1.5px solid #E9D5FF", gridColumn:"span 2" }}>
                    <div style={{ display:"flex", alignItems:"center", gap:10 }}>
                      <span style={{ fontSize:22 }}>üéô</span>
                      <div style={{ flex:1 }}>
                        <div style={{ fontSize:13, fontWeight:700, marginBottom:1 }}>Sales Tactics</div>
                        <div style={{ fontSize:11, color:"#999" }}>Product-led vs outcome-driven ¬∑ 20-sec pitches ¬∑ pushback scripts</div>
                      </div>
                      <span style={{ fontSize:14, color:"#C4B5FD" }}>‚Ä∫</span>
                    </div>
                  </div>
                </div>
                <div style={{ fontSize:10, fontFamily:"DM Mono", color:"#aaa", letterSpacing:"1px", marginBottom:8 }}>üî• ACTIVE DEALS ‚Äî PITCH THESE FIRST</div>
                {BRANDS.filter(b=>b.hasDeal).map(brand => (
                  <div key={brand.id} style={{ background:"white", borderRadius:12, padding:"10px 12px", marginBottom:6, border:"1.5px solid #FED7AA", display:"flex", alignItems:"center", gap:10 }}>
                    <div style={{ width:36, height:36, borderRadius:8, flexShrink:0, background:brandColor(brand.id), display:"flex", alignItems:"center", justifyContent:"center", fontSize:10, fontWeight:700, fontFamily:"DM Mono", color:"white" }}>{getInitials(brand.name)}</div>
                    <div style={{ flex:1, minWidth:0 }}><div style={{ fontWeight:600, fontSize:12, marginBottom:1 }}>{brand.name}</div><DealBadge deal={brand.deal} /></div>
                    <div style={{ fontSize:11, color:mc(brand.margin), fontFamily:"DM Mono", fontWeight:700, flexShrink:0 }}>{brand.margin}%</div>
                  </div>
                ))}
                <div style={{ background:"#FFFBEB", border:"1px solid #FDE68A", borderRadius:12, padding:"12px 14px", marginTop:12 }}>
                  <div style={{ fontSize:10, fontFamily:"DM Mono", color:"#D97706", letterSpacing:"1px", marginBottom:6 }}>üìå KEY PRINCIPLES</div>
                  {["Keep throwing deals at them until they hang up and say no","Come from a place of helping ‚Äî if the store is slow, you're there to change that","Resolve credits first. Never pitch a new deal before fixing an existing problem","Low pressure close: 'If it doesn't sell, we'll give you a full credit refund. Zero risk.'"].map((tip,i) => (
                    <div key={i} style={{ display:"flex", gap:6, marginBottom:i<3?6:0 }}><span style={{ color:"#D97706", fontSize:11, flexShrink:0 }}>‚ú¶</span><div style={{ fontSize:11, color:"#555", lineHeight:1.45 }}>{tip}</div></div>
                  ))}
                </div>
              </div>
            )}
            {screen === "walkin" && <WalkInGuide onFinish={() => setScreen("catalog")} />}
            {screen === "catalog" && <CatalogScreen />}
            {screen === "objections" && <ObjectionScreen />}
            {screen === "tactics" && <TacticsScreen />}
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
